---
title: "Miscelânea"
author: "<img src = 'https://d33wubrfki0l68.cloudfront.net/9b0699f18268059bdd2e5c21538a29eade7cbd2b/67e5c/img/logo/cursor1-5.png' width = '20%'>"
date: ""
output:
  xaringan::moon_reader:
    css: ["default", "default-fonts", "css/custom-intro.css"]
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
knit: pagedown::chrome_print
---

```{r, child="00-preamble.Rmd"}

```

```{r, include=FALSE}
options(htmltools.preserve.raw = FALSE)
library(tidyverse)
```

## Gráficos interativos e estáticos

Gráficos interativos têm o poder de engajar mais, por conta do efeito *voosh*. Todo ser humano gosta de interagir com aquilo que está analisando.

No entanto, isso vem com um custo: não são todos os documentos capazes de processar visualizações dinâmicas. Em particular, PDF, Word e PPT não rodam esses conteúdos.

Nessa aula, vamos visitar tanto o mundo estático quanto dinâmico, para que você saiba por onde começar quando receber um novo desafio.

---
## Atividade

Vamos construir htmlwidgets nos scripts!

<br>

<center>
<img src="https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif" width = "300" height = "300">
<br>
<br>
`r blue('Ao RStudio: ')`
<center>

---

## htmlwidgets

`htmlwidgets` são bibliotecas de visualização JavaScript encapsuladas em pacotes de R. Elas nos permitem usar diversas ferramentas JavaScript diretamente do R, adicionando algumas poucas linhas de código em nosso script.

Usando `htmlwidgets`, conseguimos construir tabelas, gráficos, mapas e muito outras visualizações interativas e naturalmente bonitas.

[Clique aqui](https://www.htmlwidgets.org/index.html) para acessar uma lista completa de todos os `htmlwidgets` disponíveis.

---
## Tabelas com reactable

O pacote `reactable` nos permite criar tabelas interativas baseadas na biblioteca [React Table](https://github.com/tannerlinsley/react-table). 

[Clique aqui](https://glin.github.io/reactable/) para acessar o tutorial completo do pacote `{reactable}`.

---
<br><br>

A interatividade dos `htmlwidgets` não depende de uma sessão R rodando por trás. Você pode utilizá-los em qualquer documento `.html`.

```{r, results='asis'}
reactable::reactable(mtcars, compact = TRUE, defaultPageSize = 4, 
                     striped = TRUE)
```


---
## Pacotes alternativos para tabelas

A seguir, uma lista de pacotes/funções alternativos que trazem soluções para visualização de tabelas.

- `knitr::kable()`: não é um htmlwidget (não possui interatividade), mas é uma solução para formatar tabelas quando não precisamos que elas sejam interativas. Funciona em conjunto com o pacote `{kableExtra}`.

- `DT::datatable()`: outro htmlwidget para criar tabelas interativas. Funciona tal como o `reactable()`, mas um pouco mais burocrático para formatar as tabelas. Baseado na biblioteca JavaScript [DataTables](http://datatables.net/).

#### Tutoriais

- [Tutorial kable e kableExtra](https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html)

- [Tutorial DT](https://rstudio.github.io/DT/)

---
## Gráficos com plotly

O pacote `plotly` nos permite criar gráficos interativos baseados na biblioteca [Plotly](https://plotly.com/) (construída em [D3](https://d3js.org/)). 

Embora seja possível criar um plotly do zero usando a função `plot_ly()`, um jeito muito eficiente de utilizar essa biblioteca é criar um ggplot e então utilizar a função `ggplotly()`. Veja o exemplo a seguir.

#### Tutoriais

- [Tutorial plotly](https://plotly.com/r/)

- [Interactive web-based data visualization with R, plotly, and shiny](https://plotly-r.com/)

---
<br><br>

```{r}
p <- ggplot(mtcars) +
  geom_point(aes(x = wt, y = mpg))
plotly::ggplotly(p, height = 400)
```

---
## Pacotes alternativos

A seguir, uma lista de pacotes/funções alternativos que trazem soluções para visualização de gráficos.

- `highcharter::highcharter()`: pacote gráfico baseado na biblioteca JavaScript [Highcharts](https://www.highcharts.com/). A biblioteca Highcharts é gratuita apenas para fins educacionais e não lucrativos (exceto órgãos governamentais). Para outros usos, você pode precisar de uma licença. **`r blue('[avançado]')`**

- Procure por pacotes para tipos específicos de gráficos na [galeria de htmlwidgets](http://gallery.htmlwidgets.org/).

#### Tutoriais

- [Tutorial highcharter](http://jkunst.com/highcharter/)

- [Documentação Highcharts](https://api.highcharts.com/highcharts/)

---
## Mapas com leaflet

O pacote `{leaflet}` nos permite criar mapas interativos baseados na biblioteca  JavaScript open-source [Leaflet](https://leafletjs.com/).

Para criar um mapa leaflet, utilizamos a função `leaflet::leaflet()` e diversas funções auxiliares para caracterizar nosso mapa. Um tutorial de como utilizar o `leaflet` se encontra [aqui](http://rstudio.github.io/leaflet/).

A seguir, mostramos um exemplo simples de como criar um mapa leaflet.

---
<br><br>

.tiny[
```{r}
library(leaflet)

leaflet(height = 300) %>%
  addTiles() %>%  # Adiciona a camada gráfica do OpenStreetMap (padrão)
  addMarkers(
    lng = -46.6623969, lat = -23.5581664, 
    popup = "A Curso-R morava aqui antes da pandemia :'("
  )
```
]

---
## Pacotes alternativos

- `highcharter::hcmap()`: variação do `highcharter` para mapas, baseada na biblioteca JavaScript [Highcharts](https://www.highcharts.com/maps/demo). **`r blue('[avançado]')`**

- [`{tmap}`](https://github.com/mtennekes/tmap): Pacote focado em mapas temáticos.

#### Tutoriais

- [Construindo mapas com o highcharter](http://jkunst.com/highcharter/highmaps.html)

- [Documentação Highmaps](https://api.highcharts.com/highmaps/)

- [Documentação do tmap](https://github.com/mtennekes/tmap)


---
## Referências e material extra

#### htmlwidgets

- [Galeria htmlwidgets](http://gallery.htmlwidgets.org/)

#### reactable

- [A biblioteca React Table](https://github.com/tannerlinsley/react-table)
- [Tutorial reactable](https://glin.github.io/reactable/)

#### DT

- [Tutorial DT](https://rstudio.github.io/DT/)

#### plotly

- [Tutorial plotly](https://plotly.com/r/)

- [Interactive web-based data visualization with R, plotly, and shiny](https://plotly-r.com/)

---
<br><br>

#### highcharter/highcharts

- [Tutorial highcharter](http://jkunst.com/highcharter/)

- [Biblioteca Highcharts](https://www.highcharts.com/)

- [Galeria Highcharts](https://www.highcharts.com/demo)

- [Documentação Highcharts](https://api.highcharts.com/highcharts/)

#### leaflet

- [Biblioteca Leaflet](https://leafletjs.com/)

- [Tutorial Leaflet](http://rstudio.github.io/leaflet/)

#### highmaps

- [Galeria Highmaps](https://www.highcharts.com/maps/demo)

- [Documentação Highmaps](https://api.highcharts.com/highmaps/)

<br><br>
